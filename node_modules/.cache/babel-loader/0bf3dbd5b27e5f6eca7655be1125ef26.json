{"ast":null,"code":"//facial-rec.js\nconst checkFaces = async () => {\n  console.log('Checking faces...');\n  if (videoRef.current && !videoRef.current.paused && !videoRef.current.ended && detector) {\n    console.log('Video is playing, detecting faces...');\n    const faces = await detector.estimateFaces(videoRef.current, {\n      flipHorizontal: false\n    });\n    if (faces.length > 0) {\n      console.log(faces);\n      try {\n        var _faces$, _faceNames$find, _faceNames$find2, _faceNames$find3, _faceNames$find4;\n        const faceNames = (_faces$ = faces[0]) === null || _faces$ === void 0 ? void 0 : _faces$.keypoints.filter(item => item.hasOwnProperty('name'));\n        const rightEye = faceNames === null || faceNames === void 0 ? void 0 : (_faceNames$find = faceNames.find(item => item.name === \"rightEye\")) === null || _faceNames$find === void 0 ? void 0 : _faceNames$find.x;\n        const leftEye = faceNames === null || faceNames === void 0 ? void 0 : (_faceNames$find2 = faceNames.find(item => item.name === \"leftEye\")) === null || _faceNames$find2 === void 0 ? void 0 : _faceNames$find2.x;\n        const faceOvalRight = faceNames === null || faceNames === void 0 ? void 0 : (_faceNames$find3 = faceNames.find(item => item.name === \"faceOval\" && item.index === 26)) === null || _faceNames$find3 === void 0 ? void 0 : _faceNames$find3.x;\n        const faceOvalLeft = faceNames === null || faceNames === void 0 ? void 0 : (_faceNames$find4 = faceNames.find(item => item.name === \"faceOval\" && item.index === 15)) === null || _faceNames$find4 === void 0 ? void 0 : _faceNames$find4.x;\n        console.log(`Right Eye: ${rightEye}, Left Eye: ${leftEye}, Face Oval Right: ${faceOvalRight}, Face Oval Left: ${faceOvalLeft}`);\n        if (rightEye && leftEye && faceOvalRight && faceOvalLeft) {\n          console.log(\"All keypoints found.\");\n          console.log(`Condition check: Right Eye + 50 > Face Oval Right (${rightEye + 50} > ${faceOvalRight})`);\n          console.log(`Condition check: Left Eye - 50 < Face Oval Left (${leftEye - 50} < ${faceOvalLeft})`);\n          if (rightEye + 50 > faceOvalRight || leftEye - 50 < faceOvalLeft) {\n            console.log(\"Entering condition for sound play.\");\n            if (!playSound) {\n              setPlaySound(true);\n              audioRef.current.play();\n              console.log(\"Condition met, playing sound.\");\n            }\n          } else {\n            console.log(\"Entering condition for sound pause.\");\n            if (playSound) {\n              setPlaySound(false);\n              audioRef.current.pause();\n              audioRef.current.currentTime = 0;\n              console.log(\"Condition not met, stopping sound.\");\n            }\n          }\n        } else {\n          console.log(\"One or more keypoints are undefined.\");\n        }\n      } catch (error) {\n        console.error(\"Error processing facial landmarks:\", error);\n      }\n    } else {\n      console.log(\"No faces detected.\");\n    }\n  }\n};","map":{"version":3,"names":["checkFaces","console","log","videoRef","current","paused","ended","detector","faces","estimateFaces","flipHorizontal","length","_faces$","_faceNames$find","_faceNames$find2","_faceNames$find3","_faceNames$find4","faceNames","keypoints","filter","item","hasOwnProperty","rightEye","find","name","x","leftEye","faceOvalRight","index","faceOvalLeft","playSound","setPlaySound","audioRef","play","pause","currentTime","error"],"sources":["/Users/sanskarmishra/Hackathon-2024/sera/src/facial-rec.js"],"sourcesContent":["//facial-rec.js\nconst checkFaces = async () => {\n    console.log('Checking faces...');\n    if (videoRef.current && !videoRef.current.paused && !videoRef.current.ended && detector) {\n        console.log('Video is playing, detecting faces...');\n        const faces = await detector.estimateFaces(videoRef.current, { flipHorizontal: false });\n        if (faces.length > 0) {\n            console.log(faces);\n            try {\n                const faceNames = faces[0]?.keypoints.filter(item => item.hasOwnProperty('name'));\n                const rightEye = faceNames?.find(item => item.name === \"rightEye\")?.x;\n                const leftEye = faceNames?.find(item => item.name === \"leftEye\")?.x;\n                const faceOvalRight = faceNames?.find(item => item.name === \"faceOval\" && item.index === 26)?.x;\n                const faceOvalLeft = faceNames?.find(item => item.name === \"faceOval\" && item.index === 15)?.x;\n\n                console.log(`Right Eye: ${rightEye}, Left Eye: ${leftEye}, Face Oval Right: ${faceOvalRight}, Face Oval Left: ${faceOvalLeft}`);\n\n                if (rightEye && leftEye && faceOvalRight && faceOvalLeft) {\n                    console.log(\"All keypoints found.\");\n                    console.log(`Condition check: Right Eye + 50 > Face Oval Right (${rightEye + 50} > ${faceOvalRight})`);\n                    console.log(`Condition check: Left Eye - 50 < Face Oval Left (${leftEye - 50} < ${faceOvalLeft})`);\n                    if (rightEye + 50 > faceOvalRight || leftEye - 50 < faceOvalLeft) {\n                        console.log(\"Entering condition for sound play.\");\n                        if (!playSound) {\n                            setPlaySound(true);\n                            audioRef.current.play();\n                            console.log(\"Condition met, playing sound.\");\n                        }\n                    } else {\n                        console.log(\"Entering condition for sound pause.\");\n                        if (playSound) {\n                            setPlaySound(false);\n                            audioRef.current.pause();\n                            audioRef.current.currentTime = 0;\n                            console.log(\"Condition not met, stopping sound.\");\n                        }\n                    }\n                } else {\n                    console.log(\"One or more keypoints are undefined.\");\n                }\n            } catch (error) {\n                console.error(\"Error processing facial landmarks:\", error);\n            }\n        } else {\n            console.log(\"No faces detected.\");\n        }\n    }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}